
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "2014_examples/plot_tardis_example.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_2014_examples_plot_tardis_example.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_2014_examples_plot_tardis_example.py:


Tardis 2014 Example
==========================

This is the example

.. GENERATED FROM PYTHON SOURCE LINES 7-14

.. code-block:: default



    from tardis import run_tardis
    from tardis.io.config_reader import Configuration
    from tardis.io.atom_data.util import download_atom_data
    import matplotlib.pyplot as plt





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Iterations:                                                                                0/? [00:00<?, ?it/s]
    Packets:                                                                                   0/? [00:00<?, ?it/s]



.. GENERATED FROM PYTHON SOURCE LINES 15-16

Uncomment this line if you need to download the dataset.

.. GENERATED FROM PYTHON SOURCE LINES 16-20

.. code-block:: default



    download_atom_data("kurucz_cd23_chianti_H_He")








.. GENERATED FROM PYTHON SOURCE LINES 21-22

Runs the example

.. GENERATED FROM PYTHON SOURCE LINES 22-39

.. code-block:: default

    def config_modifier(conf):
        conf["montecarlo"]["nthreads"] = 1
        conf["montecarlo"]["last_no_of_packets"] = 1.0e5
        conf["montecarlo"]["no_of_virtual_packets"] = 10

        conf["atom_data"] = "/home/blackbird/Downloads/" + conf["atom_data"]

        return conf


    conf = Configuration.from_yaml(
        "../../2014/2014_kerzendorf_sim/appendix_A1/tardis_example.yml"
    )
    modified_conf = config_modifier(conf)

    print(modified_conf)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    {'tardis_config_version': 'v1.0', 'supernova': {'luminosity_requested': <Quantity 1.05927636e+43 erg / s>, 'time_explosion': <Quantity 13. d>, 'luminosity_wavelength_start': <Quantity 0. Angstrom>, 'luminosity_wavelength_end': <Quantity inf Angstrom>}, 'atom_data': '/home/blackbird/Downloads/kurucz_cd23_chianti_H_He.h5', 'model': {'structure': {'type': 'specific', 'velocity': {'start': <Quantity 11000. km / s>, 'stop': <Quantity 20000. km / s>, 'num': 20}, 'density': {'type': 'branch85_w7', 'w7_time_0': <Quantity 0.00023148 d>, 'w7_rho_0': <Quantity 3.e+29 g / cm3>, 'w7_v_0': <Quantity 1. km / s>}}, 'abundances': {'type': 'uniform', 'O': 0.19, 'Mg': 0.03, 'Si': 0.52, 'S': 0.19, 'Ar': 0.04, 'Ca': 0.03}}, 'plasma': {'disable_electron_scattering': False, 'ionization': 'lte', 'excitation': 'lte', 'radiative_rates_type': 'dilute-blackbody', 'line_interaction_type': 'macroatom', 'initial_t_inner': <Quantity -1. K>, 'initial_t_rad': <Quantity -1. K>, 'disable_line_scattering': False, 'w_epsilon': 1e-10, 'nlte': {'species': [], 'coronal_approximation': False, 'classical_nebular': False}, 'continuum_interaction': {'species': [], 'enable_adiabatic_cooling': False, 'enable_two_photon_decay': False}, 'helium_treatment': 'none', 'heating_rate_data_file': 'none', 'link_t_rad_t_electron': 0.9}, 'montecarlo': {'seed': 23111963, 'no_of_packets': 40000.0, 'iterations': 20, 'last_no_of_packets': 100000.0, 'no_of_virtual_packets': 10, 'convergence_strategy': {'type': 'damped', 'damping_constant': 1.0, 'threshold': 0.05, 'fraction': 0.8, 'hold_iterations': 3, 't_inner': {'damping_constant': 1.0, 'threshold': 0.05}, 'stop_if_converged': False, 'lock_t_inner_cycles': 1, 't_inner_update_exponent': -0.5, 't_rad': {'damping_constant': 1.0, 'threshold': 0.05}, 'w': {'damping_constant': 1.0, 'threshold': 0.05}}, 'nthreads': 1, 'virtual_spectrum_spawn_range': {'start': <Quantity 1. Angstrom>, 'end': <Quantity inf Angstrom>}, 'enable_reflective_inner_boundary': False, 'inner_boundary_albedo': 0.0, 'enable_full_relativity': False, 'enable_nonhomologous_expansion': False, 'tracking': {'track_rpacket': False, 'initial_array_length': 10}, 'debug_packets': False, 'logger_buffer': 1}, 'spectrum': {'start': <Quantity 500. Angstrom>, 'stop': <Quantity 20000. Angstrom>, 'num': 10000, 'method': 'virtual', 'integrated': {'points': 1000, 'interpolate_shells': 0, 'compute': 'CPU'}, 'virtual': {'tau_russian': 10.0, 'survival_probability': 0.0, 'enable_biasing': False, 'virtual_packet_logging': False}}, 'config_dirname': '../../2014/2014_kerzendorf_sim/appendix_A1'}




.. GENERATED FROM PYTHON SOURCE LINES 40-43

.. code-block:: default

    sim = run_tardis(modified_conf)




.. rst-class:: sphx-glr-script-out

.. code-block:: pytb

    Traceback (most recent call last):
      File "/home/blackbird/Rohith/tardis/tardis-setups/tardis-setups/2014/plot_tardis_example.py", line 40, in <module>
        sim = run_tardis(modified_conf)
      File "/home/blackbird/Rohith/tardis/tardis/tardis/base.py", line 101, in run_tardis
        simulation = Simulation.from_config(
      File "/home/blackbird/Rohith/tardis/tardis/tardis/simulation/base.py", line 642, in from_config
        plasma = assemble_plasma(
      File "/home/blackbird/Rohith/tardis/tardis/tardis/plasma/standard_plasmas.py", line 96, in assemble_plasma
        atom_data = AtomData.from_hdf(atom_data_fname)
      File "/home/blackbird/Rohith/tardis/tardis/tardis/io/atom_data/base.py", line 165, in from_hdf
        fname = resolve_atom_data_fname(fname)
      File "/home/blackbird/Rohith/tardis/tardis/tardis/io/atom_data/util.py", line 47, in resolve_atom_data_fname
        raise IOError(
    OSError: Atom Data /home/blackbird/Downloads/kurucz_cd23_chianti_H_He.h5 is not found in current path or in TARDIS data repo. /home/blackbird/Downloads/kurucz_cd23_chianti_H_He is also not a standard known TARDIS atom dataset.




.. GENERATED FROM PYTHON SOURCE LINES 44-60

.. code-block:: default

    spectrum = sim.runner.spectrum
    spectrum_virtual = sim.runner.spectrum_virtual
    spectrum_integrated = sim.runner.spectrum_integrated

    plt.figure(figsize=(10, 6.5))

    spectrum.plot(label="Normal packets")
    spectrum_virtual.plot(label="Virtual packets")
    spectrum_integrated.plot(label="Formal integral")

    plt.xlim(500, 9000)
    plt.title("TARDIS example model spectrum")
    plt.xlabel("Wavelength [$\AA$]")
    plt.ylabel("Luminosity density [erg/s/$\AA$]")
    plt.legend()
    plt.show()


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  25.547 seconds)


.. _sphx_glr_download_2014_examples_plot_tardis_example.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_tardis_example.py <plot_tardis_example.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_tardis_example.ipynb <plot_tardis_example.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
